var F=Object.defineProperty;var K=(f,a)=>{for(var v in a)F(f,v,{get:a[v],enumerable:!0})};var E={};K(E,{EventEmitter:()=>H,default:()=>w,defaultMaxListeners:()=>U,init:()=>k,listenerCount:()=>V,on:()=>$,once:()=>q});var b={},N=!1;function W(){if(N)return b;N=!0;var f=typeof Reflect=="object"?Reflect:null,a=f&&typeof f.apply=="function"?f.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},v;f&&typeof f.ownKeys=="function"?v=f.ownKeys:Object.getOwnPropertySymbols?v=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:v=function(e){return Object.getOwnPropertyNames(e)};function m(t){console&&console.warn&&console.warn(t)}var l=Number.isNaN||function(e){return e!==e};function i(){i.init.call(this)}b=i,b.once=I,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var d=10;function L(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(t){if(typeof t!="number"||t<0||l(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");d=t}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||l(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function y(t){return t._maxListeners===void 0?i.defaultMaxListeners:t._maxListeners}i.prototype.getMaxListeners=function(){return y(this)},i.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var o=e==="error",u=this._events;if(u!==void 0)o=o&&u.error===void 0;else if(!o)return!1;if(o){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var h=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw h.context=s,h}var g=u[e];if(g===void 0)return!1;if(typeof g=="function")a(g,this,n);else for(var C=g.length,T=R(g,C),r=0;r<C;++r)a(T[r],this,n);return!0};function c(t,e,n,r){var o,u,s;if(L(n),u=t._events,u===void 0?(u=t._events=Object.create(null),t._eventsCount=0):(u.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),u=t._events),s=u[e]),s===void 0)s=u[e]=n,++t._eventsCount;else if(typeof s=="function"?s=u[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),o=y(t),o>0&&s.length>o&&!s.warned){s.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=s.length,m(h)}return t}i.prototype.addListener=function(e,n){return c(this,e,n,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,n){return c(this,e,n,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=p.bind(r);return o.listener=n,r.wrapFn=o,o}i.prototype.once=function(e,n){return L(n),this.on(e,_(this,e,n)),this},i.prototype.prependOnceListener=function(e,n){return L(n),this.prependListener(e,_(this,e,n)),this},i.prototype.removeListener=function(e,n){var r,o,u,s,h;if(L(n),o=this._events,o===void 0)return this;if(r=o[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(u=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){h=r[s].listener,u=s;break}if(u<0)return this;u===0?r.shift():P(r,u),r.length===1&&(o[e]=r[0]),o.removeListener!==void 0&&this.emit("removeListener",e,h||n)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var n,r,o;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var u=Object.keys(r),s;for(o=0;o<u.length;++o)s=u[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this};function x(t,e,n){var r=t._events;if(r===void 0)return[];var o=r[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?M(o):R(o,o.length)}i.prototype.listeners=function(e){return x(this,e,!0)},i.prototype.rawListeners=function(e){return x(this,e,!1)},i.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):O.call(t,e)},i.prototype.listenerCount=O;function O(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]};function R(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function P(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function M(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function I(t,e){return new Promise(function(n,r){function o(s){t.removeListener(e,u),r(s)}function u(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}j(t,e,u,{once:!0}),e!=="error"&&A(t,o,{once:!0})})}function A(t,e,n){typeof t.on=="function"&&j(t,"error",e,n)}function j(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(u){r.once&&t.removeEventListener(e,o),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}return b}var w=W();w.once;w.once=function(f,a){return new Promise((v,m)=>{function l(...d){i!==void 0&&f.removeListener("error",i),v(d)}let i;a!=="error"&&(i=d=>{f.removeListener(name,l),m(d)},f.once("error",i)),f.once(a,l)})};w.on=function(f,a){let v=[],m=[],l=null,i=!1,d={async next(){let c=v.shift();if(c)return createIterResult(c,!1);if(l){let p=Promise.reject(l);return l=null,p}return i?createIterResult(void 0,!0):new Promise((p,_)=>m.push({resolve:p,reject:_}))},async return(){f.removeListener(a,L),f.removeListener("error",y),i=!0;for(let c of m)c.resolve(createIterResult(void 0,!0));return createIterResult(void 0,!0)},throw(c){l=c,f.removeListener(a,L),f.removeListener("error",y)},[Symbol.asyncIterator](){return this}};return f.on(a,L),f.on("error",y),d;function L(...c){let p=m.shift();p?p.resolve(createIterResult(c,!1)):v.push(c)}function y(c){i=!0;let p=m.shift();p?p.reject(c):l=c,d.return()}};var{EventEmitter:H,defaultMaxListeners:U,init:k,listenerCount:V,on:$,once:q}=w;var D=E;export{H as EventEmitter,D as default,U as defaultMaxListeners,k as init,V as listenerCount,$ as on,q as once};
/*! For license information please see events.js.LEGAL.txt */
