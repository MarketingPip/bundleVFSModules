var c=typeof globalThis<"u"||typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},o=class{};function s(n){return n instanceof o}function f(n){let e=new o;return n&&typeof n=="object"&&Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function a(n){return typeof Proxy>"u"?n:new Proxy(n,{has(e,t){return t!=="__magic__"},get(e,t){if(t!==Symbol.unscopables)return t in e?e[t]:c[t]},set(e,t,u){return e[t]=u,!0}})}function l(n){let e=`with (__proxy__) { return eval(${JSON.stringify(n)}); }`;return new Function("__proxy__",e)}var r=class{constructor(n,e){typeof e=="string"&&(e={filename:e}),this.code=n,this.filename=e?.filename??"evalmachine.<anonymous>",this._runner=l(n)}runInContext(n,e){if(!(n instanceof o))throw new TypeError("needs a 'context' argument.");return this._runner(a(n))}runInThisContext(_options){return eval(this.code)}runInNewContext(n,e){let t=f(n),u=this.runInContext(t,e);return n&&typeof n=="object"&&Object.keys(t).forEach(i=>{n[i]=t[i]}),u}};function x(n,e,t){return new r(n,t).runInContext(e,t)}function h(n,e){return new r(n,e).runInThisContext(e)}function w(n,e,t){return new r(n,t).runInNewContext(e,t)}function y(n,e){return new r(n,e)}var p={Script:r,createContext:f,createScript:y,isContext:s,runInContext:x,runInNewContext:w,runInThisContext:h};export{r as Script,f as createContext,y as createScript,p as default,s as isContext,x as runInContext,w as runInNewContext,h as runInThisContext};
/*! For license information please see vm.js.LEGAL.txt */
