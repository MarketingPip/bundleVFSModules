var d=1,l=new Map,r=0;function y(){return d++}var i=class{constructor(n){this.callbacks=n||{},this.enabled=!1}enable(){return this.enabled=!0,this}disable(){return this.enabled=!1,this}};function p(c){return new i(c)}function h(){return r}function w(){let c=l.get(r);return c?c.triggerAsyncId:0}function k(c,n="Function",o=r){let t=y(),u={asyncId:t,type:n,triggerAsyncId:o};return l.set(t,u),a.forEach(s=>{if(s.enabled&&s.callbacks.init)try{s.callbacks.init(t,n,o,u)}catch{}}),async function(...s){let b=r;r=t,a.forEach(e=>{if(e.enabled&&e.callbacks.before)try{e.callbacks.before(t)}catch{}});let f;try{f=await c(...s),a.forEach(e=>{if(e.enabled&&e.callbacks.promiseResolve)try{e.callbacks.promiseResolve(t)}catch{}})}catch(e){throw e}finally{a.forEach(e=>{if(e.enabled&&e.callbacks.after)try{e.callbacks.after(t)}catch{}}),a.forEach(e=>{if(e.enabled&&e.callbacks.destroy)try{e.callbacks.destroy(t)}catch{}}),l.delete(t),r=b}return f}}var a=[];function I(c){a.push(c)}function g(c,n="Promise",o=r){return k(c,n,o)()}export{p as createHook,h as executionAsyncId,I as registerHook,w as triggerAsyncId,k as wrapAsyncResource,g as wrapPromise};
/*! For license information please see async_hooks.js.LEGAL.txt */
